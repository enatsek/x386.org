<!-- HTML Header Start -->
<!DOCTYPE html>
<html><head>
<title>x386.org: Debian and Ubuntu Documentation</title>
<meta charset="UTF-8">
 
 
 
 
 
 
<style>
/* base.css */
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 40px;
  border: 1px solid transparent;
}

body blockquote {
  background-color: initial;
}

body code {
  color: inherit;
}

body code > div {
  background: none;
}

body.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

body p,
body blockquote,
body ul,
body ol,
body dl,
body table,
body pre {
  margin-top: 16px;
  margin-bottom: 16px;
}

/* github-markdown.css */
body {
  color-scheme: dark;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  margin: 0;
  color: #c9d1d9;
  background-color: #0d1117;
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word
}
body .octicon {
  display: inline-block;
  fill: currentColor;
  vertical-align: text-bottom
}
body h1:hover .anchor .octicon-link:before,
body h2:hover .anchor .octicon-link:before,
body h3:hover .anchor .octicon-link:before,
body h4:hover .anchor .octicon-link:before,
body h5:hover .anchor .octicon-link:before,
body h6:hover .anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>")
}
body details,
body figcaption,
body figure {
  display: block
}
body summary {
  display: list-item
}
body a {
  background-color: transparent;
  color: #58a6ff;
  text-decoration: none
}
body a:active,
body a:hover {
  outline-width: 0
}
body abbr[title] {
  border-bottom: none;
  -webkit-text-decoration: underline dotted;
  text-decoration: underline dotted
}
body b,
body strong {
  font-weight: 600
}
body dfn {
  font-style: italic
}
body h1 {
  margin: .67em 0;
  font-weight: 600;
  padding-bottom: .3em;
  font-size: 1.8em;
  border-bottom: 1px solid #21262d
}
body mark {
  background-color: #ff0;
  color: #c9d1d9
}
body small {
  font-size: 90%
}
body sub,
body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline
}
body sub {
  bottom: -.25em
}
body sup {
  top: -.5em
}
body img {
  border-style: none;
  max-width: 100%;
  box-sizing: content-box;
  background-color: #0d1117
}
body code,
body kbd,
body pre,
body samp {
  font-family: monospace,monospace;
  font-size: 1em
}
body figure {
  margin: 1em 40px
}
body hr {
  box-sizing: content-box;
  overflow: hidden;
  background: 0 0;
  border-bottom: 1px solid #21262d;
  height: .25em;
  padding: 0;
  margin: 24px 0;
  background-color: #30363d;
  border: 0
}
body [type=reset],
body [type=submit],
body html [type=button] {
  -webkit-appearance: button
}
body [type=button]::-moz-focus-inner,
body [type=reset]::-moz-focus-inner,
body [type=submit]::-moz-focus-inner {
  border-style: none;
  padding: 0
}
body [type=button]:-moz-focusring,
body [type=reset]:-moz-focusring,
body [type=submit]:-moz-focusring {
  outline: 1px dotted ButtonText
}
body [type=checkbox],
body [type=radio] {
  box-sizing: border-box;
  padding: 0
}
body [type=number]::-webkit-inner-spin-button,
body [type=number]::-webkit-outer-spin-button {
  height: auto
}
body [type=search] {
  -webkit-appearance: textfield;
  outline-offset: -2px
}
body [type=search]::-webkit-search-cancel-button,
body [type=search]::-webkit-search-decoration {
  -webkit-appearance: none
}
body ::-webkit-input-placeholder {
  color: inherit;
  opacity: .54
}
body ::-webkit-file-upload-button {
  -webkit-appearance: button;
  font: inherit
}
body a:hover {
  text-decoration: underline
}
body hr::before {
  display: table;
  content: ""
}
body hr::after {
  display: table;
  clear: both;
  content: ""
}
body table {
  border-spacing: 0;
  border-collapse: collapse;
  display: block;
  width: max-content;
  max-width: 100%;
  overflow: auto
}
body td,
body th {
  padding: 0
}
body details summary {
  cursor: pointer
}
body details:not([open]) > :not(summary) {
  display: none!important
}
body kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  line-height: 10px;
  color: #c9d1d9;
  vertical-align: middle;
  background-color: #161b22;
  border: solid 1px rgba(110,118,129,.4);
  border-bottom-color: rgba(110,118,129,.4);
  border-radius: 6px;
  box-shadow: inset 0 -1px 0 rgba(110,118,129,.4)
}

details > summary {
  font-weight: 600;
  font-size: 1.4em;
  padding-top: .1em;
}


body h1,
body h2,
body h3,
body h4,
body h5,
body h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25
}
body h2 {
  font-weight: 600;
  font-size: 1.6em;
  border-top: 1px solid #21262d;
  padding-top: .2em;
}
body h3 {
  font-weight: 600;
  font-size: 1.4em;
  border-top: 1px solid #21262d;
  padding-top: .2em;
}
body h4 {
  font-weight: 600;
  font-size: 1.2em;
  border-top: 1px solid #21262d;
  padding-top: .2em;
}
body h5 {
  font-weight: 600;
  font-size: 1.0em;
  border-top: 1px solid #21262d;
  padding-top: .2em;
}
body h6 {
  font-weight: 600;
  font-size: 1em;
  color: #8b949e
}
body p {
  margin-top: 0;
  margin-bottom: 10px
}
body blockquote {
  margin: 0;
  padding: 0 1em;
  color: #8b949e;
  border-left: .25em solid #30363d
}
body ol,
body ul {
  margin-top: 0;
  margin-bottom: 0;
  padding-left: 2em
}
body ol ol,
body ul ol {
  list-style-type: lower-roman
}
body ol ol ol,
body ol ul ol,
body ul ol ol,
body ul ul ol {
  list-style-type: lower-alpha
}
body dd {
  margin-left: 0
}
body code,
body tt {
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px
}
body pre {
  margin-top: 0;
  margin-bottom: 0;
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px;
  word-wrap: normal
}
body :-ms-input-placeholder {
  color: #484f58;
  opacity: 1
}
body ::-ms-input-placeholder {
  color: #484f58;
  opacity: 1
}
body ::placeholder {
  color: #484f58;
  opacity: 1
}
body .pl-c {
  color: #8b949e
}
body .pl-c1,
body .pl-s .pl-v {
  color: #79c0ff
}
body .pl-e,
body .pl-en {
  color: #d2a8ff
}
body .pl-s .pl-s1,
body .pl-smi {
  color: #c9d1d9
}
body .pl-ent {
  color: #7ee787
}
body .pl-k {
  color: #ff7b72
}
body .pl-pds,
body .pl-s,
body .pl-s .pl-pse .pl-s1,
body .pl-sr,
body .pl-sr .pl-cce,
body .pl-sr .pl-sra,
body .pl-sr .pl-sre {
  color: #a5d6ff
}
body .pl-smw,
body .pl-v {
  color: #ffa657
}
body .pl-bu {
  color: #f85149
}
body .pl-ii {
  color: #f0f6fc;
  background-color: #8e1519
}
body .pl-c2 {
  color: #f0f6fc;
  background-color: #b62324
}
body .pl-sr .pl-cce {
  font-weight: 700;
  color: #7ee787
}
body .pl-ml {
  color: #f2cc60
}
body .pl-mh,
body .pl-mh .pl-en,
body .pl-ms {
  font-weight: 700;
  color: #1f6feb
}
body .pl-mi {
  font-style: italic;
  color: #c9d1d9
}
body .pl-mb {
  font-weight: 700;
  color: #c9d1d9
}
body .pl-md {
  color: #ffdcd7;
  background-color: #67060c
}
body .pl-mi1 {
  color: #aff5b4;
  background-color: #033a16
}
body .pl-mc {
  color: #ffdfb6;
  background-color: #5a1e02
}
body .pl-mi2 {
  color: #c9d1d9;
  background-color: #1158c7
}
body .pl-mdr {
  font-weight: 700;
  color: #d2a8ff
}
body .pl-ba {
  color: #8b949e
}
body .pl-sg {
  color: #484f58
}
body .pl-corl {
  text-decoration: underline;
  color: #a5d6ff
}
body [data-catalyst] {
  display: block
}
body g-emoji {
  font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  font-size: 1em;
  font-style: normal!important;
  font-weight: 400;
  line-height: 1;
  vertical-align: -.075em
}
body g-emoji img {
  width: 1em;
  height: 1em
}
body::before {
  display: table;
  content: ""
}
body::after {
  display: table;
  clear: both;
  content: ""
}
body > :first-child {
  margin-top: 0!important
}
body > :last-child {
  margin-bottom: 0!important
}
body a:not([href]) {
  color: inherit;
  text-decoration: none
}
body .absent {
  color: #f85149
}
body .anchor {
  float: left;
  padding-right: 4px;
  margin-left: -20px;
  line-height: 1
}
body .anchor:focus {
  outline: 0
}
body blockquote,
body details,
body dl,
body ol,
body p,
body pre,
body table,
body ul {
  margin-top: 0;
  margin-bottom: 16px
}
body blockquote > :first-child {
  margin-top: 0
}
body blockquote > :last-child {
  margin-bottom: 0
}
body sup > a::before {
  content: "["
}
body sup > a::after {
  content: "]"
}
body h1 .octicon-link,
body h2 .octicon-link,
body h3 .octicon-link,
body h4 .octicon-link,
body h5 .octicon-link,
body h6 .octicon-link {
  color: #c9d1d9;
  vertical-align: middle;
  visibility: hidden
}
body h1:hover .anchor,
body h2:hover .anchor,
body h3:hover .anchor,
body h4:hover .anchor,
body h5:hover .anchor,
body h6:hover .anchor {
  text-decoration: none
}
body h1:hover .anchor .octicon-link,
body h2:hover .anchor .octicon-link,
body h3:hover .anchor .octicon-link,
body h4:hover .anchor .octicon-link,
body h5:hover .anchor .octicon-link,
body h6:hover .anchor .octicon-link {
  visibility: visible
}
body h1 code,
body h1 tt,
body h2 code,
body h2 tt,
body h3 code,
body h3 tt,
body h4 code,
body h4 tt,
body h5 code,
body h5 tt,
body h6 code,
body h6 tt {
  padding: 0 .2em;
  font-size: inherit
}
body ol.no-list,
body ul.no-list {
  padding: 0;
  list-style-type: none
}
body ol[type="1"] {
  list-style-type: decimal
}
body ol[type=a] {
  list-style-type: lower-alpha
}
body ol[type=i] {
  list-style-type: lower-roman
}
body div > ol:not([type]) {
  list-style-type: decimal
}
body ol ol,
body ol ul,
body ul ol,
body ul ul {
  margin-top: 0;
  margin-bottom: 0
}
body li > p {
  margin-top: 16px
}
body li + li {
  margin-top: .25em
}
body dl {
  padding: 0
}
body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: 600
}
body dl dd {
  padding: 0 16px;
  margin-bottom: 16px
}
body table th {
  font-weight: 600
}
body table td,
body table th {
  padding: 6px 13px;
  border: 1px solid #30363d
}
body table tr {
  background-color: #0d1117;
  border-top: 1px solid #21262d
}
body table tr:nth-child(2n) {
  background-color: #161b22
}
body table img {
  background-color: transparent
}
body img[align=right] {
  padding-left: 20px
}
body img[align=left] {
  padding-right: 20px
}
body .emoji {
  max-width: none;
  vertical-align: text-top;
  background-color: transparent
}
body span.frame {
  display: block;
  overflow: hidden
}
body span.frame > span {
  display: block;
  float: left;
  width: auto;
  padding: 7px;
  margin: 13px 0 0;
  overflow: hidden;
  border: 1px solid #30363d
}
body span.frame span img {
  display: block;
  float: left
}
body span.frame span span {
  display: block;
  padding: 5px 0 0;
  clear: both;
  color: #c9d1d9
}
body span.align-center {
  display: block;
  overflow: hidden;
  clear: both
}
body span.align-center > span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: center
}
body span.align-center span img {
  margin: 0 auto;
  text-align: center
}
body span.align-right {
  display: block;
  overflow: hidden;
  clear: both
}
body span.align-right > span {
  display: block;
  margin: 13px 0 0;
  overflow: hidden;
  text-align: right
}
body span.align-right span img {
  margin: 0;
  text-align: right
}
body span.float-left {
  display: block;
  float: left;
  margin-right: 13px;
  overflow: hidden
}
body span.float-left span {
  margin: 13px 0 0
}
body span.float-right {
  display: block;
  float: right;
  margin-left: 13px;
  overflow: hidden
}
body span.float-right > span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: right
}
body code,
body tt {
  padding: .2em .4em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(110,118,129,.4);
  border-radius: 6px
}
body code br,
body tt br {
  display: none
}
body del code {
  text-decoration: inherit
}
body pre code {
  font-size: 100%
}
body pre > code {
  padding: 0;
  margin: 0;
  word-break: normal;
  white-space: pre;
  background: 0 0;
  border: 0
}
body .highlight {
  margin-bottom: 16px
}
body .highlight pre {
  margin-bottom: 0;
  word-break: normal
}
body .highlight pre,
body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #161b22;
  border-radius: 6px
}
body pre code,
body pre tt {
  display: inline;
  max-width: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0
}
body .csv-data td,
body .csv-data th {
  padding: 5px;
  overflow: hidden;
  font-size: 12px;
  line-height: 1;
  text-align: left;
  white-space: nowrap
}
body .csv-data .blob-num {
  padding: 10px 8px 9px;
  text-align: right;
  background: #0d1117;
  border: 0
}
body .csv-data tr {
  border-top: 0
}
body .csv-data th {
  font-weight: 600;
  background: #161b22;
  border-top: 0
}
body .footnotes {
  font-size: 12px;
  color: #8b949e;
  border-top: 1px solid #30363d
}
body .footnotes ol {
  padding-left: 16px
}
body .footnotes li {
  position: relative
}
body .footnotes li:target::before {
  position: absolute;
  top: -8px;
  right: -8px;
  bottom: -8px;
  left: -24px;
  pointer-events: none;
  content: "";
  border: 2px solid #1f6feb;
  border-radius: 6px
}
body .footnotes li:target {
  color: #c9d1d9
}
body .footnotes .data-footnote-backref g-emoji {
  font-family: monospace
}
body [hidden] {
  display: none!important
}
body ::-webkit-calendar-picker-indicator {
  filter: invert(50%)
}

/* node_modules/highlight.js/styles/github-dark.css */
pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: GitHub Dark
  Description: Dark theme as seen on github.com
  Author: github.com
  Maintainer: @Hirse
  Updated: 2021-05-15

  Outdated base version: https://github.com/primer/github-syntax-dark
  Current colors taken from GitHub's CSS
*/.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#79c0ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-code,.hljs-comment,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}

</style>
</head>
<body>
<div class="document">
<div class="header"></div><div class="inner">
<!-- HTML Header End -->
<!-- Header Start -->

<h1>x386.org: Debian and Ubuntu Documentation</h1>
<h4>| &ensp;<a href="index.html">Home</a>&ensp; |&ensp; <a href="about.html">About</a> &ensp;| &ensp;<a href="contact.html">Contact</a>&ensp; | &ensp;<a href="license.html">License</a>&ensp; | &ensp;<a href="privacy_policy.html">Privacy Policy</a>&ensp; |</h4>
<!-- Copyright Start -->
<details>
<summary>Copyright (C) 2020 - 2025 Exforge exforge@x386.org</summary>
<hr />
<p>This document is free text: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.</p>
<p>This document is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program.  If not, see: <a href="https://www.gnu.org/licenses/">www.gnu.org/licenses/</a>.</p>
<hr />
</details>
<!-- Copyright End -->

<!-- Header End -->
<h5>Active Directory on Debian and Ubuntu</h5>
<h1>Simple Active Directory Configuration on Debian and Ubuntu</h1>
<details>
<summary>
0. Specs
</summary>
<hr />
<h3>0.0. The What</h3>
<p>We will install a single-domain Active Directory infrastructure using Debian or Ubuntu Servers.</p>
<ul>
<li><strong>2 Domain Controllers</strong> and <strong>1 File Server</strong>.</li>
<li>Windows workstations will be able to join the domain.</li>
<li><strong>No license costs</strong>, except for the Windows workstation licenses.</li>
</ul>
<h3>0.1. Environment</h3>
<ul>
<li><strong>Domain Name:</strong> <code>386387.XYZ</code></li>
<li><strong>Domain NetBIOS Name:</strong> <code>386387</code></li>
<li><strong>First DC:</strong><ul>
<li><code>srv1.386387.xyz</code></li>
<li><code>192.168.1.201</code></li>
<li>Debian 13/12 or Ubuntu 24.04/22.04 LTS Server</li>
</ul>
</li>
<li><strong>Second DC:</strong><ul>
<li><code>srv2.386387.xyz</code></li>
<li><code>192.168.1.202</code></li>
<li>Debian 13/12 or Ubuntu 24.04/22.04 LTS Server</li>
</ul>
</li>
<li><strong>File Server:</strong><ul>
<li><code>filesrv.386387.xyz</code></li>
<li><code>192.168.1.203</code></li>
<li>Debian 13/12 or Ubuntu 24.04/22.04 LTS Server</li>
</ul>
</li>
<li>
<p>Windows workstations will be able to connect to the domain.</p>
</li>
<li>
<p><strong>Groups and Users:</strong></p>
</li>
<li><strong>Marketing:</strong> mrk01, mrk02, mrk03</li>
<li><strong>Sales:</strong> sls01, sls02, sls03</li>
<li><strong>Production:</strong> prd01, prd02, prd03</li>
<li><strong>IT:</strong> it01, it02, it03, support</li>
<li><strong>SysAdmin:</strong> support</li>
<li>
<p><strong>All:</strong> all of the above users</p>
</li>
<li>
<p><strong>File Server Shares:</strong></p>
</li>
</ul>
<pre><code>//filesrv/Xmrk01    mrk01 (RW)
//filesrv/Xmrk02    mrk02 (RW)
//filesrv/Xmrk03    mrk03 (RW)
//filesrv/XMrk      Marketing (RW)
//filesrv/XMrkPub   Marketing (RW), All (R)
//filesrv/Xsls01    sls01 (RW)
//filesrv/Xsls02    sls02 (RW)
//filesrv/Xsls03    sls03 (RW)
//filesrv/XSls      Sales (RW)
//filesrv/XSlsPub   Sales (RW), All (R)
//filesrv/Xprd01    prd01 (RW)
//filesrv/Xprd02    prd02 (RW)
//filesrv/Xprd03    prd03 (RW)
//filesrv/XPrd      Production (RW)
//filesrv/XPrdPub   Production (RW), All (R)
//filesrv/Xit01     it01 (RW)
//filesrv/Xit02     it02 (RW)
//filesrv/Xit03     it03 (RW)
//filesrv/Xsupport  support (RW)
//filesrv/XIT       IT (RW)
//filesrv/XITPub    IT (RW), All (R)
//filesrv/XSys      SysAdmin (RW)
//filesrv/XSysPub   SysAdmin (RW), All (R)
//filesrv/XAll      All (RW)
</code></pre>
<p>In my tests, I used distributions uniformly (i.e., all servers were either Debian 12, Debian 13, Ubuntu 22.04, or Ubuntu 24.04). I believe the system would work with a mix of distributions, but this has not been tested.</p>
<h3>0.3. Phases</h3>
<ul>
<li>Add First DC (<code>srv1.386387.xyz</code>)</li>
<li>Add Additional DC (<code>srv2.386387.xyz</code>)</li>
<li>AD User Management</li>
<li>Add a Linux File Server to the Domain (<code>filesrv.386387.xyz</code>)</li>
<li>Add a Windows Computer to the Domain</li>
</ul>
<h3>0.4. Preliminary Tasks</h3>
<p>There are some important considerations. Not complying with them can cause problems.</p>
<h4>0.4.1. Choosing Domain Name and Realm</h4>
<p>The Realm is in the domain name format, and the Domain Name is a single word (the NetBIOS name of your domain).</p>
<p>If your company's internet domain name is <code>example.com</code>, you can choose your Realm and Domain Name as follows:
- <strong>Realm:</strong> <code>EXAMPLE.COM</code>
- <strong>Domain Name:</strong> <code>EXAMPLE</code></p>
<p>Whenever you use them, they must be in <strong>UPPERCASE</strong>. This is due to a design choice in Microsoft's implementation.</p>
<h4>0.4.2. IP Address and Hostname for Domain Controllers and Domain Members</h4>
<p>Domain Controllers and Domain Members should have static IP addresses.</p>
<p>While there might be ways to use DHCP, it is not recommended for Domain Controllers, and the method is beyond this guide's scope.</p>
<p>The hostname must be in the format <code>name.example.com</code> (lowercase). Due to an incompatibility between Samba and Debian/Ubuntu (and other Debian-based distributions), you must remove the line starting with <code>127.0.1.1</code> (not <code>127.0.0.1</code>) from your <code>/etc/hosts</code> file and add the server's IP and hostname (both short and FQDN) as shown below.</p>
<p><strong>Example <code>/etc/hosts</code>:</strong></p>
<pre><code>127.0.0.1       localhost
192.168.1.201   srv1.386387.xyz srv1
</code></pre>
<h4>0.4.3. Mixed Environment</h4>
<p>You should have at least 2 Domain Controllers (DCs). You could use one Windows and one Linux DC to benefit from Microsoft's native AD management tools, but this is not necessary.</p>
<p>I recommend installing all DCs on Linux and using a Windows workstation with RSAT (Remote Server Administration Tools) installed to manage AD. This allows you to use the standard AD management programs (including for DNS) from a familiar environment.</p>
<h4>0.4.4. Default Values</h4>
<p>Remember to replace all occurrences of <code>386387</code>, <code>386387.XYZ</code>, and <code>386387.xyz</code> with your own values, respecting the case.</p>
<h3>0.5. Sources</h3>
<ul>
<li>Based on the valuable documentation at: <a href="https://www.server-world.info/en/note?os=Ubuntu_18.04&amp;p=samba&amp;f=4">Server-World</a></li>
</ul>
<p><br></p>
</details>
<details>
<summary>
1. Add First Domain Controller
</summary>
<hr />
<h3>1.0. Specs</h3>
<pre><code>Domain Name:  386387
Realm:        386387.XYZ    
Hostname:     srv1.386387.xyz
IP:           192.168.1.201
</code></pre>
<h3>1.1. Set Hostname</h3>
<p>Set the hostname to the fully qualified domain name (if not done already):</p>
<pre><code>sudo hostnamectl hostname srv1.386387.xyz
</code></pre>
<p>Update the /etc/hosts file</p>
<pre><code>sudo nano /etc/hosts
</code></pre>
<p>Modify the beginning of the file as follows:</p>
<pre><code>127.0.0.1       localhost
192.168.1.201   srv1.386387.xyz srv1 
</code></pre>
<h3>1.2. Install required packages</h3>
<pre><code>sudo apt update
sudo apt -y install samba krb5-config winbind smbclient 
</code></pre>
<p>Provide the following answers to the configuration prompts:
- <strong>Default Kerberos version 5 realm:</strong> <code>386387.XYZ</code>
- <strong>Kerberos servers for your realm:</strong> <code>srv1.386387.xyz</code>
- <strong>Administrative server for your Kerberos realm:</strong> <code>srv1.386387.xyz</code></p>
<h3>1.3. Run Samba Configuration</h3>
<p>Backup the original samba configuration:</p>
<pre><code>sudo mv /etc/samba/smb.conf /etc/samba/smb.conf.original 
</code></pre>
<p>Run the domain provisioning tool:</p>
<pre><code>sudo samba-tool domain provision
</code></pre>
<p>Provide the following answers:
- <strong>Realm:</strong> <code>386387.XYZ</code>
- <strong>Domain:</strong> <code>386387</code>
- <strong>Server Role (dc, member, standalone) [dc]:</strong> Press Enter
- <strong>DNS backend (SAMBA_INTERNAL,...:</strong> Press Enter
- <strong>DNS forwarder IP address...:</strong> Enter your DNS server (e.g., <code>8.8.8.8</code>)
- <strong>Administrator password:</strong> Enter a strong password</p>
<h3>1.4. Copy Kerberos Config, Stop and Disable Services</h3>
<pre><code>sudo cp /var/lib/samba/private/krb5.conf /etc/
sudo systemctl stop smbd nmbd winbind systemd-resolved
sudo systemctl disable smbd nmbd winbind systemd-resolved
sudo systemctl unmask samba-ad-dc 
</code></pre>
<p><strong>Note:</strong> On Debian 12, you may see an error <code>Failed to stop systemd-resolved.service: Unit systemd-resolved.service not loaded.</code> This can be safely ignored.</p>
<h3>1.5. Recreate resolv.conf</h3>
<pre><code>sudo rm /etc/resolv.conf
sudo nano /etc/resolv.conf
</code></pre>
<p>Add the following lines:</p>
<pre><code>domain 386387.xyz
nameserver 127.0.0.1
</code></pre>
<h3>1.5. Start DC Services</h3>
<pre><code>sudo systemctl start samba-ad-dc
sudo systemctl enable samba-ad-dc 
</code></pre>
<p>Check the domain functional level:</p>
<pre><code>sudo samba-tool domain level show
</code></pre>
<p>Create a test domain user:</p>
<pre><code>sudo samba-tool user create exforge
</code></pre>
<p><br></p>
</details>
<details>
<summary>
2. Add Additional Domain Controller
</summary>
<hr />
<h2>2.0. Specs</h2>
<pre><code>Domain Name: 386387
Realm:       386387.XYZ 
Hostname:    srv2.386387.xyz
IP:          192.168.1.202
Original DC: srv1.386387.xyz (192.168.1.201)
</code></pre>
<h3>2.1. Set Hostname</h3>
<p>Set hostname as fully qualified (if you haven't done it before)</p>
<pre><code>sudo hostnamectl hostname srv2.386387.xyz
</code></pre>
<p>Update the /etc/hosts file</p>
<pre><code>sudo nano /etc/hosts
</code></pre>
<p>Modify the beginning of the file as follows:</p>
<pre><code>127.0.0.1       localhost
192.168.1.202   srv2.386387.xyz srv2 
</code></pre>
<h3>2.2. Install Kerberos and Edit Configuration</h3>
<pre><code>sudo apt update
sudo apt -y install krb5-user
</code></pre>
<p>(Press Enter through all prompts; we will configure manually.)</p>
<p>Edit the Kerberos configuration:</p>
<pre><code>sudo nano /etc/krb5.conf 
</code></pre>
<p>Ensure the beginning of the file contains:</p>
<pre><code>[libdefaults]
        default_realm = 386387.XYZ
        dns_lookup_realm = false
        dns_lookup_kdc = true
</code></pre>
<h3>2.3. Stop and disable systemd.resolved</h3>
<p><em>This step is typically not necessary for Debian 12/13.</em></p>
<pre><code>sudo systemctl stop systemd-resolved
sudo systemctl disable systemd-resolved 
</code></pre>
<h3>2.4. Recreate resolv.conf</h3>
<pre><code>sudo rm /etc/resolv.conf
sudo nano /etc/resolv.conf
</code></pre>
<p>Add the following lines (pointing to the first DC):</p>
<pre><code>domain 386387.xyz
nameserver 192.168.1.201
</code></pre>
<h3>2.5. Obtain a Kerberos Ticket</h3>
<p>You will be prompted for the Domain Administrator password (set during provisioning in section 1.3).</p>
<pre><code>sudo kinit administrator
</code></pre>
<p>Verify the Kerberos ticket:</p>
<pre><code>sudo klist
</code></pre>
<h3>2.6. Add This DC to Existing AD</h3>
<p>Install necessary packages:</p>
<pre><code>sudo apt -y install samba winbind smbclient 
</code></pre>
<p>Back up and remove the default Samba config, then join the domain:</p>
<pre><code>sudo mv /etc/samba/smb.conf /etc/samba/smb.conf.org 
sudo samba-tool domain join 386387.XYZ DC -U &quot;srv1\administrator&quot; \
   --dns-backend=SAMBA_INTERNAL 
</code></pre>
<h3>2.7. Stop, Disable Old Services, and Enable Samba AD DC</h3>
<pre><code>sudo systemctl stop smbd nmbd winbind
sudo systemctl disable smbd nmbd winbind
sudo systemctl unmask samba-ad-dc
sudo systemctl start samba-ad-dc
sudo systemctl enable samba-ad-dc
</code></pre>
<h3>2.8. Verification</h3>
<p>Verify authentication locally:</p>
<pre><code>sudo smbclient //127.0.0.1/netlogon -U Administrator -c 'ls'
</code></pre>
<p>Check replication status:</p>
<pre><code>sudo samba-tool drs showrepl
</code></pre>
<p><strong>Note:</strong> The warning <code>Warning: No NC replicated for Connection!</code> is not critical and can be ignored initially.</p>
<p><br></p>
</details>
<details>
<summary>
3. AD User &amp; Computer Management
</summary>
<hr />
<p><em>These commands can be run on any Domain Controller.</em></p>
<h3>3.1. User Management</h3>
<p>View all user-related commands:</p>
<pre><code>sudo samba-tool user --help
</code></pre>
<p>List domain users:</p>
<pre><code>sudo samba-tool user list
</code></pre>
<p>List users with full Distinguished Name (DN):</p>
<pre><code>sudo samba-tool user list --full-dn
</code></pre>
<p>Create a domain user:</p>
<pre><code>sudo samba-tool user create ubuntu
</code></pre>
<p>Create a user forced to change password at next login:</p>
<pre><code>sudo samba-tool user create ubuntu2 --must-change-at-next-login
</code></pre>
<p>Delete a domain user:</p>
<pre><code>sudo samba-tool user delete ubuntu2
</code></pre>
<p>Reset a user's password:</p>
<pre><code>sudo samba-tool user setpassword ubuntu
</code></pre>
<p>Set an expiration date for a user account:</p>
<pre><code>sudo samba-tool user setexpiry ubuntu --days=7
</code></pre>
<p>Remove expiration from a user account:</p>
<pre><code>sudo samba-tool user setexpiry --noexpiry ubuntu
</code></pre>
<p>Disable/Enable a user account:</p>
<pre><code>sudo samba-tool user disable ubuntu
sudo samba-tool user enable ubuntu
</code></pre>
<p>Show user details:</p>
<pre><code>sudo samba-tool user show ubuntu
</code></pre>
<p>Edit user details (opens in a text editor):</p>
<pre><code>sudo samba-tool user edit ubuntu
</code></pre>
<h3>3.2. Group Management</h3>
<p>View all group-related commands:</p>
<pre><code>sudo samba-tool group --help
</code></pre>
<p>List domain groups:</p>
<pre><code>sudo samba-tool group list
</code></pre>
<p>List members of a specific group:</p>
<pre><code>sudo samba-tool group listmembers &quot;Domain Users&quot;
</code></pre>
<p>Create a new domain group:</p>
<pre><code>sudo samba-tool group add TestUsers
sudo samba-tool group add TestUsers2
</code></pre>
<p>Delete a domain group:</p>
<pre><code>sudo samba-tool group delete TestUsers2
</code></pre>
<p>Add/Remove a member to/from a group:</p>
<pre><code>sudo samba-tool group addmembers TestUsers ubuntu
sudo samba-tool group removemembers TestUsers ubuntu
</code></pre>
<p>Show group details:</p>
<pre><code>sudo samba-tool group show TestUsers
</code></pre>
<p>Edit group details (opens in a text editor):</p>
<pre><code>sudo samba-tool group edit TestUsers
</code></pre>
<h3>3.3. Computer Management</h3>
<p>View all computer-related commands:</p>
<pre><code>sudo samba-tool computer --help
</code></pre>
<p>List domain computers:</p>
<pre><code>sudo samba-tool computer list
</code></pre>
<p>Show computer details:</p>
<pre><code>sudo samba-tool computer show srv1
</code></pre>
<p>Edit computer details (opens in a text editor):</p>
<pre><code>sudo samba-tool computer edit srv1
</code></pre>
<h3>3.4. Other Important Management Subcommands</h3>
<p>Check the local AD database for errors:</p>
<pre><code>sudo samba-tool dbcheck --help
</code></pre>
<p>Manage delegation:</p>
<pre><code>sudo samba-tool delegation --help
</code></pre>
<p>Manage DNS:</p>
<pre><code>sudo samba-tool dns --help
</code></pre>
<p>Domain management:</p>
<pre><code>sudo samba-tool domain --help
</code></pre>
<p>Manage Directory Replication Services (DRS):</p>
<pre><code>sudo samba-tool drs --help
</code></pre>
<p>Forest management:</p>
<pre><code>sudo samba-tool forest --help
</code></pre>
<p>Manage Flexible Single Master Operations (FSMO) roles:</p>
<pre><code>sudo samba-tool fsmo --help
</code></pre>
<p>Manage Group Policy Objects (GPO):</p>
<pre><code>sudo samba-tool gpo --help
</code></pre>
<p>Manage Organizational Units (OU):</p>
<pre><code>sudo samba-tool ou --help
</code></pre>
<p>Schema querying and management:</p>
<pre><code>sudo samba-tool schema --help
</code></pre>
<p>Sites management:</p>
<pre><code>sudo samba-tool sites --help
</code></pre>
<p>Retrieve the time from a server:</p>
<pre><code>sudo samba-tool time --help
</code></pre>
<p><br></p>
</details>
<details>
<summary>
4. Create Users and Groups
</summary>
<hr />
<h3>4.1. Create Users</h3>
<p>Create all users with <code>Password1</code> as the default password. Users will be required to change their password at first logon.</p>
<pre><code>sudo samba-tool user add mrk01 Password1 --given-name=Mrk --surname=01 \
    --must-change-at-next-login
sudo samba-tool user add mrk02 Password1 --given-name=Mrk --surname=02 \
    --must-change-at-next-login
sudo samba-tool user add mrk03 Password1 --given-name=Mrk --surname=03 \
    --must-change-at-next-login
sudo samba-tool user add sls01 Password1 --given-name=Sls --surname=01 \
    --must-change-at-next-login
sudo samba-tool user add sls02 Password1 --given-name=Sls --surname=02 \
    --must-change-at-next-login
sudo samba-tool user add sls03 Password1 --given-name=Sls --surname=03 \
    --must-change-at-next-login
sudo samba-tool user add prd01 Password1 --given-name=Prd --surname=01 \
    --must-change-at-next-login
sudo samba-tool user add prd02 Password1 --given-name=Prd --surname=02 \
    --must-change-at-next-login
sudo samba-tool user add prd03 Password1 --given-name=Prd --surname=03 \
    --must-change-at-next-login
sudo samba-tool user add it01 Password1 --given-name=IT --surname=01 \
    --must-change-at-next-login
sudo samba-tool user add it02 Password1 --given-name=IT --surname=02 \
    --must-change-at-next-login
sudo samba-tool user add it03 Password1 --given-name=IT --surname=03 \
    --must-change-at-next-login
sudo samba-tool user add support Password1 --given-name=Support --surname=User \
    --must-change-at-next-login
</code></pre>
<h3>4.2. Create Groups</h3>
<pre><code>sudo samba-tool group add Marketing
sudo samba-tool group add Sales
sudo samba-tool group add Production
sudo samba-tool group add IT
sudo samba-tool group add SysAdmin
sudo samba-tool group add All
</code></pre>
<h3>4.3. Add Users to the Corresponding Groups</h3>
<pre><code>sudo samba-tool group addmembers Marketing mrk01,mrk02,mrk03
sudo samba-tool group addmembers Sales sls01,sls02,sls03
sudo samba-tool group addmembers Production prd01,prd02,prd03
sudo samba-tool group addmembers IT it01,it02,it03,support
sudo samba-tool group addmembers SysAdmin support
sudo samba-tool group addmembers All Marketing,Sales,Production,IT,SysAdmin
</code></pre>
<p><br></p>
</details>
<details>
<summary>
5. Install and Configure the File Server
</summary>
<hr />
<h3>5.1. Set Hostname and DNS Information</h3>
<p>Set the hostname:</p>
<pre><code>sudo hostnamectl hostname filesrv.386387.xyz
</code></pre>
<p>Update <code>/etc/hosts</code>:</p>
<pre><code>sudo nano /etc/hosts
</code></pre>
<p>Modify the beginning of the file:</p>
<pre><code>127.0.0.1       localhost
192.168.1.203   filesrv.386387.xyz filesrv 
</code></pre>
<p>Recreate <code>/etc/resolv.conf</code>:</p>
<pre><code>sudo rm /etc/resolv.conf
sudo nano /etc/resolv.conf
</code></pre>
<p>Add:</p>
<pre><code>domain 386387.xyz
nameserver 192.168.1.201
nameserver 192.168.1.202
</code></pre>
<h3>5.2. Install necessary packages</h3>
<pre><code>sudo apt update
sudo apt -y install winbind libpam-winbind libnss-winbind krb5-config \
   samba-dsdb-modules samba-vfs-modules 
</code></pre>
<p>Provide the following answers if prompted:
- <strong>Default Kerberos version 5 realm:</strong> <code>386387.XYZ</code>
- <strong>Kerberos servers for your realm:</strong> <code>srv1.386387.xyz</code>
- <strong>Administrative server for your Kerberos realm:</strong> <code>srv1.386387.xyz</code></p>
<h3>5.3. Configure Winbind</h3>
<h4>5.3.1. Configure Samba</h4>
<pre><code>sudo nano /etc/samba/smb.conf 
</code></pre>
<p>Add/Modify the following lines in the <code>[global]</code> section:</p>
<pre><code>   workgroup = 386387
   realm = 386387.XYZ
   security = ads
   idmap config * : backend = tdb
   idmap config * : range = 3000-7999
   idmap config 386387 : backend = rid
   idmap config 386387 : range = 10000-999999
   template homedir = /home/%U
   template shell = /bin/bash
   winbind use default domain = true
   winbind offline logon = false
</code></pre>
<h4>5.3.2. Configure PAM to Create Home Directories</h4>
<pre><code>sudo nano /etc/pam.d/common-session 
</code></pre>
<p>Add the following line:</p>
<pre><code>session optional        pam_mkhomedir.so skel=/etc/skel umask=077
</code></pre>
<h3>5.4. Join the AD Domain</h3>
<p>Join the server to the domain:</p>
<pre><code>sudo net ads join -U Administrator
</code></pre>
<p>Restart the winbind service:</p>
<pre><code>sudo systemctl restart winbind
</code></pre>
<p>Verify domain users are visible:</p>
<pre><code>sudo wbinfo -u
</code></pre>
<h3>5.5. Configure the File Server</h3>
<h4>5.5.0. Share Specifications</h4>
<p>There will be 24 shares. Create the directory structure:</p>
<pre><code>sudo mkdir -p /srv/shares/{Xmrk01,Xmrk02,Xmrk03,XMrk,XMrkPub,Xsls01,Xsls02,Xsls03,XSls,XSlsPub,Xprd01,Xprd02,Xprd03,XPrd,XPrdPub,Xit01,Xit02,Xit03,Xsupport,XIT,XITPub,XSys,XSysPub,XAll}
</code></pre>
<p>Set initial permissions (more specific permissions will be set via Samba):</p>
<pre><code>sudo chmod -R 777 /srv/shares
</code></pre>
<h4>5.5.1. Install Samba</h4>
<pre><code>sudo apt -y install samba
</code></pre>
<h4>5.5.2. Configure samba for AD file server</h4>
<pre><code>sudo nano /etc/samba/smb.conf
</code></pre>
<p>Add the following lines to the <code>[global]</code> section:</p>
<pre><code>   netbios name = filesrv         
   socket options = TCP_NODELAY SO_RCVBUF=16384 SO_SNDBUF=16384         
   idmap uid = 10000-20000         
   winbind enum users = yes         
   winbind gid = 10000-20000         
   os level = 20         
   winbind enum groups = yes         
   password server = *         
   preferred master = no         
   winbind separator = +         
   encrypt passwords = yes         
   dns proxy = no         
   wins server = 192.168.1.201         
   wins proxy = no  
</code></pre>
<p>Add the following share definitions to the end of the file. <strong>Remember to replace <code>386387</code> with your domain NetBIOS name if different.</strong></p>
<pre><code># Marketing
[Xmrk01]
   comment = Xmrk01
   path = /srv/shares/Xmrk01         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = mrk01
   write list = mrk01
[Xmrk02]
   comment = Xmrk02
   path = /srv/shares/Xmrk02         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = mrk02
   write list = mrk02
[Xmrk03]
   comment = Xmrk03
   path = /srv/shares/Xmrk03         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = mrk03
   write list = mrk03
[XMrk]
   comment = XMrk
   path = /srv/shares/XMrk         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = @Marketing
   write list = @Marketing
[XMrkPub]         
   comment = XMrkPub         
   path = /srv/shares/XMrkPub         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770
   valid users = @Marketing, @All         
   read list = @All
   write list = @Marketing
# Sales
[Xsls01]
   comment = Xsls01
   path = /srv/shares/Xsls01         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = sls01
   write list = sls01
[Xsls02]
   comment = Xsls02
   path = /srv/shares/Xsls02         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = sls02
   write list = sls02
[Xsls03]
   comment = Xsls03
   path = /srv/shares/Xsls03         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = sls03
   write list = sls03
[XSls]
   comment = XSls
   path = /srv/shares/XSls         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = @Sales
   write list = @Sales
[XSlsPub]         
   comment = XSlsPub         
   path = /srv/shares/XSlsPub         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770
   valid users = @Sales, @All         
   read list = @All
   write list = @Sales
# Production
[Xprd01]
   comment = Xprd01
   path = /srv/shares/Xprd01         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = prd01
   write list = prd01
[Xprd02]
   comment = Xprd02
   path = /srv/shares/Xprd02         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = prd02
   write list = prd02
[Xprd03]
   comment = Xprd03
   path = /srv/shares/Xprd03         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = prd03
   write list = prd03
[XPrd]
   comment = XPrd
   path = /srv/shares/XPrd         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = @Production
   write list = @Production
[XPrdPub]         
   comment = XPrdPub         
   path = /srv/shares/XPrdPub         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770
   valid users = @Production, @All         
   read list = @All
   write list = @Production
# IT
[Xit01]
   comment = Xit01
   path = /srv/shares/Xit01         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = it01
   write list = it01
[Xit02]
   comment = Xit02
   path = /srv/shares/Xit02         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = it02
   write list = it02
[Xit03]
   comment = Xit03
   path = /srv/shares/Xit03         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = it03
   write list = it03
[Xsupport]
   comment = Xsupport
   path = /srv/shares/Xsupport         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = support
   write list = support
[XIT]
   comment = XIT
   path = /srv/shares/XIT         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = @IT
   write list = @IT
[XITPub]         
   comment = XITPub         
   path = /srv/shares/XITPub         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770
   valid users = @IT, @All         
   read list = @All
   write list = @IT
# All
[XAll]
   comment = XAll
   path = /srv/shares/XAll         
   browseable = yes         
   read only = no         
   create mask = 770         
   directory mask = 770         
   valid users = @All
   write list = @All
</code></pre>
<h4>5.5.3. Restart Samba</h4>
<pre><code>sudo systemctl restart smbd
</code></pre>
<p><br></p>
</details>
<details>
<summary>
6. Add Windows Computers to the Domain 
</summary>
<hr />
<ol>
<li>On the Windows computer, configure its DNS settings to point to your Domain Controllers (e.g., <code>192.168.1.201</code> and <code>192.168.1.202</code>).</li>
<li>Proceed with the standard "Join a Domain" process through System Properties, using the domain name (<code>386387</code>) and an administrative account.</li>
<li>After joining, you can install <strong>RSAT (Remote Server Administration Tools)</strong> on the Windows workstation to manage AD, DNS, and other services.</li>
<li>You can connect to the file shares using <code>\\filesrv\ShareName</code> (e.g., <code>\\filesrv\XMrk</code>) from any domain-joined Windows computer.</li>
</ol>
</details><!-- HTML Footer Start -->

</body>
</html>

<!-- HTML Footer End -->
