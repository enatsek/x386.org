<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Self-Hosted VPN | Debian & Ubuntu Tutorials</title><link rel="shortcut icon" href="/./src/assets/logo.png" type="image/png"/><meta name="generator" content="Astro v5.16.6"/><meta name="generator" content="Starlight v0.37.1"/><meta property="og:title" content="Self-Hosted VPN"/><meta property="og:type" content="article"/><meta property="og:locale" content="en"/><meta property="og:description" content="WireGuard VPN server setup for remote access"/><meta property="og:site_name" content="Debian &#38; Ubuntu Tutorials"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="WireGuard VPN server setup for remote access"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/_astro/index.0vIKbS8r.css"><script type="module" src="/_astro/page.B1D-nYk3.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/" class="site-title sl-flex astro-m46x6ez3">  <img class="astro-m46x6ez3" alt src="/_astro/logo.Br7QL1LC.png" width="734" height="349">  <span class="astro-m46x6ez3" translate="no"> Debian &amp; Ubuntu Tutorials </span> </a>  </div> <div class="sl-flex print:hidden astro-kmkmnagf"> <site-search class="astro-kmkmnagf astro-v37mnknz" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-v37mnknz"> <svg aria-hidden="true" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-v37mnknz" style="display: none;"> <kbd class="astro-v37mnknz">Ctrl</kbd><kbd class="astro-v37mnknz">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.cjYDvRdi.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/enatsek/" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar print:hidden astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="print:hidden astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="open-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg> <svg aria-hidden="true" class="close-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg> </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <sl-sidebar-state-persist data-hash="1ngezmu" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Site Info</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/generics/about/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">About</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/generics/contact/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Contact</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/generics/license/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">License</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Web Services &amp; HTTPS</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/guides/apache/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Apache Web Server</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/nginx/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nginx Web Server</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/certbot/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Certbot</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/lamp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LAMP Stack</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/lapp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LAPP Stack</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/wordpress/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">WordPress</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/adminer/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Adminer Tool</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Database Management</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/guides/mariadb/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MariaDB</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/mariadbcluster/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MariaDB Cluster</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/postgresdebian/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PostgreSQL (Debian)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/postgresubuntu/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PostgreSQL (Ubuntu)</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Networking</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/guides/networkdebian/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Debian Network Configuration</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/networkubuntu/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ubuntu Network Configuration</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/ufw/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">UFW (Uncomplicated Firewall)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/shvpn/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Self-Hosted VPN</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/s2svpn/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Site-to-Site VPN</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Infrastructure &amp; Virtualization</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/guides/kvm1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">KVM Virtualization (Beginner)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/kvm2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">KVM Virtualization (Networking)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/keepalived/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Keepalived</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/haproxy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HAProxy</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/ansible/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ansible</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/lvm/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LVM (Logical Volume Management)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/dns/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DNS</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/ad/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Active Directory</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/nodejs/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Node.js</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">System Administration Guides</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="5"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/guides/useradministration/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">User and Group Administration</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/etcfolder/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">/etc Folder Contents</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/regex/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Regular Expressions</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/filecompression/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">File Compression</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/fhs/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">FHS (Filesystem Hierarchy Standard)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/systemd/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Systemd Basics</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/systemd2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Systemd Additional</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/debpackaging/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Debian Packaging</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/guides/otherlinuxes/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Other Linux Distributions</span>  </a> </li> </ul>  </details> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="social-icons astro-wu23bvmt"> <a href="https://github.com/enatsek/" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container print:hidden astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><span class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></span><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#0-specs" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0. Specs</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#00-the-what" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.0. The What</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#01-environment" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.1. Environment</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#02-wireguard-concepts" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.2. WireGuard Concepts</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#03-configuration-templates" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.3. Configuration Templates</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#04-sources" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.4. Sources</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#1-server-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">1. Server Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#2-debian--ubuntu--derivatives-client-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">2. Debian / Ubuntu &amp; Derivatives Client Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#3-windows-client-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">3. Windows Client Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#4-android-client-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">4. Android Client Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#5-other-clients" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">5. Other Clients</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#6-case-study---configuring-for-1000-clients" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">6. Case Study - Configuring for 1,000 Clients</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#61-creating-keypairs" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.1. Creating Keypairs</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#62-creating-server-configuration" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.2. Creating Server Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#63-creating-client-configurations" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.3. Creating Client Configurations</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#64-backup-backup" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.4. Backup Backup</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#0-specs" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0. Specs</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#00-the-what" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.0. The What</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#01-environment" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.1. Environment</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#02-wireguard-concepts" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.2. WireGuard Concepts</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#03-configuration-templates" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.3. Configuration Templates</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#04-sources" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">0.4. Sources</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#1-server-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">1. Server Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#2-debian--ubuntu--derivatives-client-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">2. Debian / Ubuntu &amp; Derivatives Client Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#3-windows-client-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">3. Windows Client Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#4-android-client-configuration" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">4. Android Client Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#5-other-clients" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">5. Other Clients</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#6-case-study---configuring-for-1000-clients" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">6. Case Study - Configuring for 1,000 Clients</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#61-creating-keypairs" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.1. Creating Keypairs</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#62-creating-server-configuration" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.2. Creating Server Configuration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#63-creating-client-configurations" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.3. Creating Client Configurations</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#64-backup-backup" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">6.4. Backup Backup</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc><script type="module" src="/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body class="astro-bguv2lll" lang="en" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">Self-Hosted VPN</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <div class="sl-heading-wrapper level-h5"><h5 id="wireguard-vpn-server-setup-for-remote-access">WireGuard VPN server setup for remote access</h5><a class="sl-anchor-link" href="#wireguard-vpn-server-setup-for-remote-access"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “WireGuard VPN server setup for remote access”</span></a></div>
<div class="sl-heading-wrapper level-h2"><h2 id="0-specs">0. Specs</h2><a class="sl-anchor-link" href="#0-specs"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “0. Specs”</span></a></div>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="00-the-what">0.0. The What</h3><a class="sl-anchor-link" href="#00-the-what"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “0.0. The What”</span></a></div>
<p>A VPN server for personal computers acts as a secure, private gateway between your device and the internet. When you connect to it using VPN software, it creates an encrypted tunnel that protects all your online activity. This process hides your real IP address, making it appear as if you are browsing from the server’s location, which helps with privacy and accessing region-locked content.</p>
<p>Essentially, it provides a safe and private connection for a single user, even when using public Wi-Fi networks.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="01-environment">0.1. Environment</h3><a class="sl-anchor-link" href="#01-environment"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “0.1. Environment”</span></a></div>
<ul>
<li>Server:
<ul>
<li>IP: 192.227.167.142</li>
<li>OS: Debian 13 Server or Ubuntu 24.04 LTS Server</li>
<li>nic: eth0</li>
</ul>
</li>
<li>Client1: Debian 13 / Ubuntu 24.04 Desktop &#x26; Server, Linux Mint</li>
<li>Client2: Windows 11</li>
<li>Client3: Android</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="02-wireguard-concepts">0.2. WireGuard Concepts</h3><a class="sl-anchor-link" href="#02-wireguard-concepts"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “0.2. WireGuard Concepts”</span></a></div>
<ul>
<li>
<p>WireGuard does not use a strict client-server model. In practice, all WireGuard nodes can act as servers and connect to each other in a peer-to-peer fashion.</p>
</li>
<li>
<p>In our configuration, the central WireGuard server will connect to many clients, and each client will only connect to this central server.</p>
</li>
<li>
<p>Connections can be initiated from either side. However, in our specific scenario, connections will always be initiated from the clients.</p>
</li>
<li>
<p>Every host in a WireGuard network must have a public key and a private key. This key pair allows peers to identify and authorize each other.</p>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="03-configuration-templates">0.3. Configuration Templates</h3><a class="sl-anchor-link" href="#03-configuration-templates"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “0.3. Configuration Templates”</span></a></div>
<p>Our central WireGuard server will use the following configuration template. You will need to replace the placeholder values with your server’s private key and the clients’ public keys. These keys are generated after installing WireGuard. Also, ensure you specify the correct name of your server’s network interface (e.g., eth0) in the “NAT for clients” section.</p>
<p>Server Configuration (/etc/wireguard/wg0.conf):</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.0vx5m.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.100/24</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">ListenPort = 53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = serverprivkey</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># NAT for clients</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = client1pubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 10.100.0.1/32</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client 2</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = client2pubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 10.100.0.2/32</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client 3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = client3pubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 10.100.0.3/32</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client 4</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = client4pubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 10.100.0.4/32</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="[Interface]Address = 10.100.0.100/24ListenPort = 53PrivateKey = serverprivkey# NAT for clientsPostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADEPostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE[Peer]# Client 1PublicKey = client1pubkeyAllowedIPs = 10.100.0.1/32[Peer]# Client 2PublicKey = client2pubkeyAllowedIPs = 10.100.0.2/32[Peer]# Client 3PublicKey = client3pubkeyAllowedIPs = 10.100.0.3/32[Peer]# Client 4PublicKey = client4pubkeyAllowedIPs = 10.100.0.4/32"><div></div></button></div></figure></div>
<p>Notes on the server configuration:</p>
<ul>
<li>
<p>The network 10.100.0.0/24 is arbitrarily chosen for the WireGuard tunnel. You can use any private IP range, though 10.x.x.x is often a good choice.</p>
</li>
<li>
<p>Port 53 is selected for WireGuard. It is the same port used for DNS, which may help obfuscate VPN traffic from ISPs that attempt to block it.</p>
</li>
<li>
<p>We need to assign a unique IP address (e.g., 10.100.0.1, 10.100.0.2, …) and a public/private key pair for the server and every client.</p>
</li>
</ul>
<p>Our WireGuard clients will use the following configuration templates. Remember to replace the placeholders with the server’s public key and each client’s respective private key.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = client1privkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.1/32</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DNS = 1.1.1.1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = serverpubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Endpoint = serverpublicip:53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 0.0.0.0/0, ::/0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PersistentKeepalive = 25</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="# Client1[Interface]PrivateKey = client1privkeyAddress = 10.100.0.1/32DNS = 1.1.1.1[Peer]PublicKey = serverpubkeyEndpoint = serverpublicip:53AllowedIPs = 0.0.0.0/0, ::/0PersistentKeepalive = 25"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client2</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = client2privkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.2/32</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DNS = 1.1.1.1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = serverpubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Endpoint = serverpublicip:53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 0.0.0.0/0, ::/0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PersistentKeepalive = 25</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="# Client2[Interface]PrivateKey = client2privkeyAddress = 10.100.0.2/32DNS = 1.1.1.1[Peer]PublicKey = serverpubkeyEndpoint = serverpublicip:53AllowedIPs = 0.0.0.0/0, ::/0PersistentKeepalive = 25"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = client3privkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.3/32</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DNS = 1.1.1.1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = serverpubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Endpoint = serverpublicip:53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 0.0.0.0/0, ::/0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PersistentKeepalive = 25</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="# Client3[Interface]PrivateKey = client3privkeyAddress = 10.100.0.3/32DNS = 1.1.1.1[Peer]PublicKey = serverpubkeyEndpoint = serverpublicip:53AllowedIPs = 0.0.0.0/0, ::/0PersistentKeepalive = 25"><div></div></button></div></figure></div>
<p>Notes on the client configuration:</p>
<ul>
<li>
<p>Each client must have its own configuration file with a unique IP address and key pair.</p>
</li>
<li>
<p>Specifying a DNS address (like 1.1.1.1) is necessary because your ISP’s DNS might not resolve certain domain names correctly when the tunnel is active.</p>
</li>
<li>
<p>The PersistentKeepalive option sends an empty packet every 25 seconds to maintain a connection state through NATs and firewalls.</p>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="04-sources">0.4. Sources</h3><a class="sl-anchor-link" href="#04-sources"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “0.4. Sources”</span></a></div>
<ul>
<li><a href="https://www.deepseek.com/">Deepseek</a></li>
<li><a href="https://chatgpt.com/">ChatGPT</a></li>
<li><a href="https://claude.ai/">Claude</a></li>
<li><a href="https://www.wireguard.com/">Wireguard Documentation</a></li>
</ul>
<br>
<div class="sl-heading-wrapper level-h2"><h2 id="1-server-configuration">1. Server Configuration</h2><a class="sl-anchor-link" href="#1-server-configuration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. Server Configuration”</span></a></div>
<hr>
<p>Enable IP Forwarding</p>
<p>The VPN server needs to forward traffic between its physical network interface and the WireGuard tunnel.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo 'net.ipv4.ip_forward=1' | sudo tee -a /etc/sysctl.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo sysctl -p                    # Apply the change</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo sysctl net.ipv4.ip_forward   # Verify it's set to 1</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="echo &#x27;net.ipv4.ip_forward=1&#x27; | sudo tee -a /etc/sysctl.confsudo sysctl -p                    # Apply the changesudo sysctl net.ipv4.ip_forward   # Verify it&#x27;s set to 1"><div></div></button></div></figure></div>
<p>Free Port 53 (Ubuntu Systems)</p>
<p>On Ubuntu, port 53 is often used by the systemd-resolved service. We need to free it or choose a different port for WireGuard. To free port 53, edit the systemd-resolved configuration:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo nano /etc/systemd/resolved.conf</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo nano /etc/systemd/resolved.conf"><div></div></button></div></figure></div>
<p>Find the line (around line 19) that says:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#DNSStubListener=yes</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="#DNSStubListener=yes"><div></div></button></div></figure></div>
<p>Change it to:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DNSStubListener=no</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="DNSStubListener=no"><div></div></button></div></figure></div>
<p>Save the file and restart the service:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo systemctl restart systemd-resolved</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo systemctl restart systemd-resolved"><div></div></button></div></figure></div>
<p>Install WireGuard and iptables</p>
<p>We need iptables to configure NAT, which allows clients to access the internet through the server.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo apt update</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo apt install -y wireguard iptables</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo apt updatesudo apt install -y wireguard iptables"><div></div></button></div></figure></div>
<p>Generate Key Pairs</p>
<p>Create a directory for the keys and generate the key pairs for the server and clients.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">mkdir wg &#x26;&#x26; cd wg</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">wg genkey | tee serverprivkey | wg pubkey > serverpubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">wg genkey | tee client1privkey | wg pubkey > client1pubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">wg genkey | tee client2privkey | wg pubkey > client2pubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">wg genkey | tee client3privkey | wg pubkey > client3pubkey</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="mkdir wg &#x26;&#x26; cd wgwg genkey | tee serverprivkey | wg pubkey > serverpubkeywg genkey | tee client1privkey | wg pubkey > client1pubkeywg genkey | tee client2privkey | wg pubkey > client2pubkeywg genkey | tee client3privkey | wg pubkey > client3pubkey"><div></div></button></div></figure></div>
<p>For reference, the generated keys in this example are:</p>
<p>Server:</p>
<ul>
<li>Privkey: <code dir="auto">kAy+LgQ3EkJtTKyB1N0BnbXGZVJE/pX6SH2yCG2l1lI=</code></li>
<li>Pubkey:  <code dir="auto">OCtqLy2OkpuiBPhmXR0DbhbaVDhpuS4AVDm3yZDP1XU=</code></li>
</ul>
<p>Client1:</p>
<ul>
<li>Privkey: <code dir="auto">SJPFU+D5Eoa3cSseIjWNh44dUQfyyFYxw0m4qGRSrFc=</code></li>
<li>Pubkey:  <code dir="auto">KgjPrrOPamV81q76C0Cql2fU1K7sSiigqYXVlwkKyBA=</code></li>
</ul>
<p>Client2:</p>
<ul>
<li>Privkey: <code dir="auto">gCJE0PoqARqSnQgq1v87v7QcSzUn97d0abVM7BpqjFc=</code></li>
<li>Pubkey: <code dir="auto">ZfZtUviU/jUAxEcIEXnf2d6rW0RcBFg+1Wt4kNnpTxg=</code></li>
</ul>
<p>Client3:</p>
<ul>
<li>Privkey: <code dir="auto">gLoXU+1aNQmcK/OtjSUJGnOXt28w/mRo1szjU+XO/XM=</code></li>
<li>Pubkey:  <code dir="auto">IG/wUYUGSDuZI0+DZsE6lq1OLNzx8aNIp8SUjllAwj8=</code></li>
</ul>
<p>Create and Activate the WireGuard Configuration</p>
<p>Create the WireGuard configuration file:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo nano /etc/wireguard/wg0.conf</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo nano /etc/wireguard/wg0.conf"><div></div></button></div></figure></div>
<p>Populate the file with the configuration below. Remember to use your actual server private key and client public keys. Also, verify your network interface name (e.g., eth0). You can add as many client <code dir="auto">[Peer]</code> sections as needed.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.100/24</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">ListenPort = 53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = kAy+LgQ3EkJtTKyB1N0BnbXGZVJE/pX6SH2yCG2l1lI=</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># NAT for clients</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = KgjPrrOPamV81q76C0Cql2fU1K7sSiigqYXVlwkKyBA=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 10.100.0.1/32</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client 2</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = ZfZtUviU/jUAxEcIEXnf2d6rW0RcBFg+1Wt4kNnpTxg=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 10.100.0.2/32</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client 3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = IG/wUYUGSDuZI0+DZsE6lq1OLNzx8aNIp8SUjllAwj8=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 10.100.0.3/32</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="[Interface]Address = 10.100.0.100/24ListenPort = 53PrivateKey = kAy+LgQ3EkJtTKyB1N0BnbXGZVJE/pX6SH2yCG2l1lI=# NAT for clientsPostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADEPostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE[Peer]# Client 1PublicKey = KgjPrrOPamV81q76C0Cql2fU1K7sSiigqYXVlwkKyBA=AllowedIPs = 10.100.0.1/32[Peer]# Client 2PublicKey = ZfZtUviU/jUAxEcIEXnf2d6rW0RcBFg+1Wt4kNnpTxg=AllowedIPs = 10.100.0.2/32[Peer]# Client 3PublicKey = IG/wUYUGSDuZI0+DZsE6lq1OLNzx8aNIp8SUjllAwj8=AllowedIPs = 10.100.0.3/32"><div></div></button></div></figure></div>
<p>Enable, start, verify the service.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo systemctl enable wg-quick@wg0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo systemctl start wg-quick@wg0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo wg show     # Verify the tunnel status and peers</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo systemctl enable wg-quick@wg0sudo systemctl start wg-quick@wg0sudo wg show     # Verify the tunnel status and peers"><div></div></button></div></figure></div>
<br>
<div class="sl-heading-wrapper level-h2"><h2 id="2-debian--ubuntu--derivatives-client-configuration">2. Debian / Ubuntu &#x26; Derivatives Client Configuration</h2><a class="sl-anchor-link" href="#2-debian--ubuntu--derivatives-client-configuration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. Debian / Ubuntu &#x26; Derivatives Client Configuration”</span></a></div>
<hr>
<p>This configuration should work on all Debian-based and Ubuntu-based systems, including Mint and MX Linux. It has been tested on Debian 13, Ubuntu 24.04, and Linux Mint 22.2.</p>
<p>Install WireGuard and resolvconf. The resolvconf package is needed to manage DNS settings for the WireGuard interface.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo apt update</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo apt install -y wireguard resolvconf</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo apt updatesudo apt install -y wireguard resolvconf"><div></div></button></div></figure></div>
<p>Create the client configuration file:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo nano /etc/wireguard/wg0.conf</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo nano /etc/wireguard/wg0.conf"><div></div></button></div></figure></div>
<p>Populate the file with the configuration below, using the correct private key for this client, the server’s public key, and the server’s public IP address.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = SJPFU+D5Eoa3cSseIjWNh44dUQfyyFYxw0m4qGRSrFc=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.1/32</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DNS = 1.1.1.1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = OCtqLy2OkpuiBPhmXR0DbhbaVDhpuS4AVDm3yZDP1XU=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Endpoint = 192.227.167.142:53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 0.0.0.0/0, ::/0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PersistentKeepalive = 25</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="[Interface]PrivateKey = SJPFU+D5Eoa3cSseIjWNh44dUQfyyFYxw0m4qGRSrFc=Address = 10.100.0.1/32DNS = 1.1.1.1[Peer]PublicKey = OCtqLy2OkpuiBPhmXR0DbhbaVDhpuS4AVDm3yZDP1XU=Endpoint = 192.227.167.142:53AllowedIPs = 0.0.0.0/0, ::/0PersistentKeepalive = 25"><div></div></button></div></figure></div>
<p>Start the WireGuard tunnel and verify its status:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo wg-quick up wg0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo wg show     # Verify the tunnel</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo wg-quick up wg0sudo wg show     # Verify the tunnel"><div></div></button></div></figure></div>
<p>Ping the server’s tunnel IP:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">ping 10.100.0.100</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="ping 10.100.0.100"><div></div></button></div></figure></div>
<p>Check your public IP address (it should match your server’s IP)</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">curl https://ip.x386.org</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="curl https://ip.x386.org"><div></div></button></div></figure></div>
<p>If the displayed IP is your server’s IP (in my case, 192.227.167.142), you are successfully routing your internet traffic through the WireGuard server.</p>
<p>To deactivate the VPN temporarily:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo wg-quick down wg0</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo wg-quick down wg0"><div></div></button></div></figure></div>
<p>To activate the VPN automatically at startup:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">sudo systemctl enable wg-quick@wg0</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="sudo systemctl enable wg-quick@wg0"><div></div></button></div></figure></div>
<br>
<div class="sl-heading-wrapper level-h2"><h2 id="3-windows-client-configuration">3. Windows Client Configuration</h2><a class="sl-anchor-link" href="#3-windows-client-configuration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. Windows Client Configuration”</span></a></div>
<hr>
<p><strong>Tested on Windows 11.</strong></p>
<p>Create a configuration file named wg0.conf and save it to a convenient location.</p>
<p>The file contents should be as follows. Remember to substitute the correct private key for this client, the server’s public key, and the server’s public IP address.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = gCJE0PoqARqSnQgq1v87v7QcSzUn97d0abVM7BpqjFc=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.2/32</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DNS = 1.1.1.1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = OCtqLy2OkpuiBPhmXR0DbhbaVDhpuS4AVDm3yZDP1XU=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Endpoint = 192.227.167.142:53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 0.0.0.0/0, ::/0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PersistentKeepalive = 25</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="[Interface]PrivateKey = gCJE0PoqARqSnQgq1v87v7QcSzUn97d0abVM7BpqjFc=Address = 10.100.0.2/32DNS = 1.1.1.1[Peer]PublicKey = OCtqLy2OkpuiBPhmXR0DbhbaVDhpuS4AVDm3yZDP1XU=Endpoint = 192.227.167.142:53AllowedIPs = 0.0.0.0/0, ::/0PersistentKeepalive = 25"><div></div></button></div></figure></div>
<p>Download and run the Windows installer from <a href="https://www.wireguard.com/install/">Wireguard Install</a>.</p>
<p>After installation, the WireGuard application will run. Click “Add Tunnel” at the bottom left and select “Import tunnel(s) from file.” Choose the wg0.conf file you created. To activate the VPN, click the “Activate” button. To deactivate it, click “Deactivate.”</p>
<br>
<div class="sl-heading-wrapper level-h2"><h2 id="4-android-client-configuration">4. Android Client Configuration</h2><a class="sl-anchor-link" href="#4-android-client-configuration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4. Android Client Configuration”</span></a></div>
<hr>
<p>Tested on my Samsung devices.</p>
<p>Create a configuration file named wg0.conf and transfer it to your Android device (e.g., via email, cloud storage, or a direct transfer).</p>
<p>The file contents should be as follows. Remember to substitute the correct private key for this client, the server’s public key, and the server’s public IP address.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Interface]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PrivateKey = gLoXU+1aNQmcK/OtjSUJGnOXt28w/mRo1szjU+XO/XM=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Address = 10.100.0.3/32</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DNS = 1.1.1.1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">[Peer]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PublicKey = OCtqLy2OkpuiBPhmXR0DbhbaVDhpuS4AVDm3yZDP1XU=</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Endpoint = 192.227.167.142:53</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">AllowedIPs = 0.0.0.0/0, ::/0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PersistentKeepalive = 25</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="[Interface]PrivateKey = gLoXU+1aNQmcK/OtjSUJGnOXt28w/mRo1szjU+XO/XM=Address = 10.100.0.3/32DNS = 1.1.1.1[Peer]PublicKey = OCtqLy2OkpuiBPhmXR0DbhbaVDhpuS4AVDm3yZDP1XU=Endpoint = 192.227.167.142:53AllowedIPs = 0.0.0.0/0, ::/0PersistentKeepalive = 25"><div></div></button></div></figure></div>
<p>Install the WireGuard app from the Google Play Store: <a href="https://play.google.com/store/apps/details?id=com.wireguard.android&#x26;hl=en-US&#x26;pli=1">https://play.google.com/store/apps/details?id=com.wireguard.android&#x26;hl=en-US&#x26;pli=1</a>.</p>
<p>Open the WireGuard app, tap the ”+” button, and select “Import from file or archive.” Select your wg0.conf file. Once imported, tap the “Activate” switch to start the VPN connection.</p>
<br>
<div class="sl-heading-wrapper level-h2"><h2 id="5-other-clients">5. Other Clients</h2><a class="sl-anchor-link" href="#5-other-clients"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5. Other Clients”</span></a></div>
<hr>
<p>The process is similar for other operating systems like macOS and iOS. Download the official WireGuard application, import the configuration file (which has the same structure), and activate the tunnel.</p>
<br>
<div class="sl-heading-wrapper level-h2"><h2 id="6-case-study---configuring-for-1000-clients">6. Case Study - Configuring for 1,000 Clients</h2><a class="sl-anchor-link" href="#6-case-study---configuring-for-1000-clients"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6. Case Study - Configuring for 1,000 Clients”</span></a></div>
<hr>
<p>As a case study, we will configure a server for 1,000 clients. We will use scripts to generate the key pairs, server configuration, and client configurations. You can modify these scripts for different numbers of clients.</p>
<p>Create and enter a temporary working directory:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">mkdir /tmp/wg</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">cd /tmp/wg</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="mkdir /tmp/wgcd /tmp/wg"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="61-creating-keypairs">6.1. Creating Keypairs</h3><a class="sl-anchor-link" href="#61-creating-keypairs"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6.1. Creating Keypairs”</span></a></div>
<p>We will create 1,001 key pairs (one for the server and 1,000 for clients). Create the script:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">nano keys.sh</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="nano keys.sh"><div></div></button></div></figure></div>
<p>Fill it with the following content. To create 10,000 key pairs, for example, you would change the first for loop to <code dir="auto">for i in {1..40}</code>.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#!/bin/bash</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Create wireguard public/private key pairs for the server and 1000 client</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Keys will be put on keys directory</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Server keys are named as serverprivkey and serverpubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Client keys are named as 1-1privkey to 1-250privkey, 1-1pubkey to 1-250pubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># It goes for 2- 3- 4- and makes total 1,000 keypairs for clients</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># So if you want to make 10.000 key pairs, change the first for line as:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># for i in {1..40}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">mkdir -p keys</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">wg genkey | tee keys/serverprivkey | wg pubkey > keys/serverpubkey</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">for i in {1..4}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">do</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">for j in {1..250}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">do</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">wg genkey | tee keys/"$i"-"$j"privkey | wg pubkey > keys/"$i"-"$j"pubkey</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">done</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">done</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="#!/bin/bash# Create wireguard public/private key pairs for the server and 1000 client# Keys will be put on keys directory# Server keys are named as serverprivkey and serverpubkey# Client keys are named as 1-1privkey to 1-250privkey, 1-1pubkey to 1-250pubkey# It goes for 2- 3- 4- and makes total 1,000 keypairs for clients## So if you want to make 10.000 key pairs, change the first for line as:# for i in {1..40}mkdir -p keyswg genkey | tee keys/serverprivkey | wg pubkey > keys/serverpubkeyfor i in {1..4}do  for j in {1..250}  do    wg genkey | tee keys/&#x22;$i&#x22;-&#x22;$j&#x22;privkey | wg pubkey > keys/&#x22;$i&#x22;-&#x22;$j&#x22;pubkey  donedone"><div></div></button></div></figure></div>
<p>Make the script executable and run it:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">chmod +x keys.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">./keys.sh</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="chmod +x keys.sh./keys.sh"><div></div></button></div></figure></div>
<p>The keys are now in the /tmp/wg/keys directory.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="62-creating-server-configuration">6.2. Creating Server Configuration</h3><a class="sl-anchor-link" href="#62-creating-server-configuration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6.2. Creating Server Configuration”</span></a></div>
<p>Create a script to generate the server configuration with 1,000 peers.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">nano serverconf.sh</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="nano serverconf.sh"><div></div></button></div></figure></div>
<p>Fill it with the following content. This script uses the 10.100.0.0/16 network, which supports approximately 65,000 clients.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#!/bin/bash</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Create wireguard server configuration for 1,000 clients.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Configuration is named as wg0.conf and put in conf directory</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># You can directly put the conf file into /etc/wireguard directory</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># 10.100.0.0/16 network is reserved for clients, that makes a total of</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#   about 65.000 client</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">mkdir -p confs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo > confs/wg0.conf</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo '[Interface]' >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo Address = 10.100.0.1/16 >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo ListenPort = 53 >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo PrivateKey = `cat keys/serverprivkey` >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo "#" NAT for clients >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo PostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">echo PostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#!/bin/bash</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">for i in {1..4}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">do</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">for j in {1..250}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">do</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo '[Peer]' >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo "#" Client "$i"-"$j" >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo PublicKey = `cat keys/"$i"-"$j"pubkey` >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo AllowedIPs = 10.100."$i"."$j"/32 >> confs/wg0.conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">done</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">done</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="#!/bin/bash# Create wireguard server configuration for 1,000 clients.# Configuration is named as wg0.conf and put in conf directory# You can directly put the conf file into /etc/wireguard directory## 10.100.0.0/16 network is reserved for clients, that makes a total of#   about 65.000 clientmkdir -p confsecho > confs/wg0.confecho &#x27;[Interface]&#x27; >> confs/wg0.confecho Address = 10.100.0.1/16 >> confs/wg0.confecho ListenPort = 53 >> confs/wg0.confecho PrivateKey = &#x60;cat keys/serverprivkey&#x60; >> confs/wg0.confecho >> confs/wg0.confecho &#x22;#&#x22; NAT for clients >> confs/wg0.confecho PostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE >> confs/wg0.confecho PostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE >> confs/wg0.conf#!/bin/bashfor i in {1..4}do  for j in {1..250}  do    echo >> confs/wg0.conf    echo &#x27;[Peer]&#x27; >> confs/wg0.conf    echo &#x22;#&#x22; Client &#x22;$i&#x22;-&#x22;$j&#x22; >> confs/wg0.conf    echo PublicKey = &#x60;cat keys/&#x22;$i&#x22;-&#x22;$j&#x22;pubkey&#x60; >> confs/wg0.conf    echo AllowedIPs = 10.100.&#x22;$i&#x22;.&#x22;$j&#x22;/32 >> confs/wg0.conf  donedone"><div></div></button></div></figure></div>
<p>Make the script executable and run it:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">chmod +x serverconf.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">./serverconf.sh</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="chmod +x serverconf.sh./serverconf.sh"><div></div></button></div></figure></div>
<p>The configuration file wg0.conf is now in the /tmp/wg/confs directory and can be copied to /etc/wireguard/ on the server.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="63-creating-client-configurations">6.3. Creating Client Configurations</h3><a class="sl-anchor-link" href="#63-creating-client-configurations"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6.3. Creating Client Configurations”</span></a></div>
<p>Create a script to generate the 1,000 client configuration files.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">nano clientconfs.sh</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="nano clientconfs.sh"><div></div></button></div></figure></div>
<p>Fill it with the following content. Remember to set the serverip variable to your server’s public IP address.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#!/bin/bash</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Create 1,000 wireguard client configurations.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># Configurations are put in confs directory and named as wg1-1.conf to</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">#    wg1-250.conf.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># It goes for 2- 3- 4- and makes total 1,000 configurations for clients</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># You can distribute the configurations to the clients as you wish.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53"># You have to edit serverip and change it to your wireguard servers.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">serverip=192.227.167.142 # REPLACE WITH YOUR SERVER'S PUBLIC IP</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">for i in {1..4}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">do</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">for j in {1..250}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">do</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo '[Interface]' > confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo PrivateKey = `cat keys/"$i"-"$j"privkey` >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo Address = 10.100."$i"."$j"/16 >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo DNS = 1.1.1.1 >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo '[Peer]' >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo PublicKey = `cat keys/serverpubkey` >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo Endpoint = "$serverip":53  >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo AllowedIPs = 0.0.0.0/0, ::/0  >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">echo PersistentKeepalive = 25  >> confs/wg"$i"-"$j".conf</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">done</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">done</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="#!/bin/bash# Create 1,000 wireguard client configurations.# Configurations are put in confs directory and named as wg1-1.conf to#    wg1-250.conf.# It goes for 2- 3- 4- and makes total 1,000 configurations for clients# You can distribute the configurations to the clients as you wish.# You have to edit serverip and change it to your wireguard servers.serverip=192.227.167.142 # REPLACE WITH YOUR SERVER&#x27;S PUBLIC IPfor i in {1..4}do  for j in {1..250}  do    echo &#x27;[Interface]&#x27; > confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo PrivateKey = &#x60;cat keys/&#x22;$i&#x22;-&#x22;$j&#x22;privkey&#x60; >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo Address = 10.100.&#x22;$i&#x22;.&#x22;$j&#x22;/16 >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo DNS = 1.1.1.1 >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo &#x27;[Peer]&#x27; >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo PublicKey = &#x60;cat keys/serverpubkey&#x60; >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo Endpoint = &#x22;$serverip&#x22;:53  >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo AllowedIPs = 0.0.0.0/0, ::/0  >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf    echo PersistentKeepalive = 25  >> confs/wg&#x22;$i&#x22;-&#x22;$j&#x22;.conf  donedone"><div></div></button></div></figure></div>
<p>Make the script executable and run it:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">chmod +x clientconfs.sh</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">./clientconfs.sh</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="chmod +x clientconfs.sh./clientconfs.sh"><div></div></button></div></figure></div>
<p>The client configuration files are now in the /tmp/wg/confs directory and can be distributed to users.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="64-backup-backup">6.4. Backup Backup</h3><a class="sl-anchor-link" href="#64-backup-backup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6.4. Backup Backup”</span></a></div>
<p>Do not forget to back up your key pairs and configuration files securely!</p>
<br> </div> <footer class="sl-flex astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links print:hidden astro-u2l5gyhi" dir="ltr">   </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>